(this["webpackJsonphashtrack-app"]=this["webpackJsonphashtrack-app"]||[]).push([[0],{132:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(66),c=a.n(l),o=a(67),u=a(68),i=a(75),s=a(74),d=a(26),p=a(3),m=function(){return n.a.createElement("div",{className:"ui two item menu"},n.a.createElement(d.b,{to:"/tweets",className:"item",target:"_blank"},"New Tweets"),n.a.createElement(d.b,{to:"/rules",className:"item",target:"_blank"},"Manage Rules"))},y=a(33),f=a(21),b=a(2),g=a(73),h=function(e){var t=e.json.data.id;return n.a.createElement(g.a,{options:{cards:"hidden",align:"center",width:"550",conversation:"none"},tweetId:t})},v=a(72),E=a.n(v),w=function(e){var t=e.error,a=e.styleType;return n.a.createElement("div",{className:"ui message ".concat(a)},n.a.createElement("div",{className:"header"},t.title),t.details?t.details.map((function(e){return n.a.createElement("p",{key:e},e)})):t.detail?n.a.createElement("p",{key:t.detail},t.detail):void 0,function(){if(t.type)return n.a.createElement("em",null,"See",n.a.createElement("a",{href:t.type,target:"_blank",rel:"noopener noreferrer"}," ","Twitter documentation"," "),"for further details.")}())},j=function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"ui active centered large inline loader"}))},_=function(e,t){switch(t.type){case"add_tweet":return Object(b.a)(Object(b.a)({},e),{},{tweets:[t.payload].concat(Object(f.a)(e.tweets)),error:null,isWaiting:!1,errors:[]});case"show_error":return Object(b.a)(Object(b.a)({},e),{},{error:t.payload,isWaiting:!1});case"add_errors":return Object(b.a)(Object(b.a)({},e),{},{errors:t.payload,isWaiting:!1});case"update_waiting":return Object(b.a)(Object(b.a)({},e),{},{error:null,isWaiting:!0});default:return e}},O=function(){var e=Object(r.useReducer)(_,{tweets:[],error:{},isWaiting:!0}),t=Object(y.a)(e,2),a=t[0],l=t[1],c=a.tweets,o=a.error,u=a.isWaiting;Object(r.useEffect)((function(){!function(){var e;(e=E()("/")).on("connect",(function(){})),e.on("tweet",(function(e){e.data&&l({type:"add_tweet",payload:e})})),e.on("heartbeat",(function(e){l({type:"update_waiting"})})),e.on("error",(function(e){l({type:"show_error",payload:e})})),e.on("authError",(function(e){console.log("data =>",e),l({type:"add_errors",payload:[e]})}))}()}),[]);return n.a.createElement("div",null,function(){var e={title:"Reconnecting",detail:"Please wait while we reconnect to the stream."};if(o&&o.detail)return n.a.createElement("div",null,n.a.createElement(w,{key:o.title,error:o,styleType:"warning"}),n.a.createElement(w,{key:e.title,error:e,styleType:"success"}),n.a.createElement(j,null))}(),function(){var e=a.errors;if(e&&e.length>0)return e.map((function(e){return n.a.createElement(w,{key:e.title,error:e,styleType:"negative"})}))}(),function(){var e={title:"Still working",detail:"Waiting for new Tweets to be posted"};if(u)return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(w,{key:e.title,error:e,styleType:"success"})),n.a.createElement(j,null))}(),function(){if(c.length>0)return n.a.createElement(n.a.Fragment,null,c.map((function(e){return n.a.createElement(h,{key:e.data.id,json:e})})))}())},k=a(18),N=a.n(k),T=a(34),x=a(35),R=a.n(x),W=function(e){var t=e.data,a=e.onRuleDelete;return n.a.createElement("div",{className:"ui segment"},n.a.createElement("p",null,t.value),n.a.createElement("div",{className:"ui label"},"tag: ",t.tag),n.a.createElement("button",{className:"ui right floated negative button",onClick:function(){return a(t.id)}},"Delete"))},D=function(e,t){switch(t.type){case"show_rules":return Object(b.a)(Object(b.a)({},e),{},{rules:t.payload,newRule:""});case"add_rule":return Object(b.a)(Object(b.a)({},e),{},{rules:[].concat(Object(f.a)(e.rules),Object(f.a)(t.payload)),newRule:"",errors:[]});case"add_errors":return Object(b.a)(Object(b.a)({},e),{},{rules:e.rules,errors:t.payload});case"delete_rule":return Object(b.a)(Object(b.a)({},e),{},{rules:Object(f.a)(e.rules.filter((function(e){return e.id!==t.payload})))});case"rule_changed":return Object(b.a)(Object(b.a)({},e),{},{newRule:t.payload});case"change_loading_status":return Object(b.a)(Object(b.a)({},e),{},{isLoading:t.payload});default:return e}},S=function(){var e=Object(r.useReducer)(D,{rules:[],newRule:"",isLoading:!1,errors:[]}),t=Object(y.a)(e,2),a=t[0],l=t[1],c=function(){var e=Object(T.a)(N.a.mark((function e(t){var r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={add:[{value:a.newRule}]},l({type:"change_loading_status",payload:!0}),e.prev=3,e.next=6,R.a.post("/api/rules",r);case 6:(n=e.sent).data.body.errors?l({type:"add_errors",payload:n.data.body.errors}):l({type:"add_rule",payload:n.data.body.data}),l({type:"change_loading_status",payload:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),l({type:"add_errors",payload:[{detail:e.t0.message}]}),l({type:"change_loading_status",payload:!1});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(T.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={delete:{ids:[t]}},l({type:"change_loading_status",payload:!0}),e.next=4,R.a.post("/api/rules",a);case 4:l({type:"delete_rule",payload:t}),l({type:"change_loading_status",payload:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"change_loading_status",payload:!0}),e.prev=1,e.next=4,R.a.get("/api/rules");case 4:t=e.sent,a=t.data.body.data,l({type:"show_rules",payload:void 0===a?[]:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l({type:"add_errors",payload:[e.t0.response.data]});case 12:l({type:"change_loading_status",payload:!1});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()}),[]),n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(e){return c(e)}},n.a.createElement("div",{className:"ui fluid action input"},n.a.createElement("input",{type:"text",autoFocus:!0,value:a.newRule,onChange:function(e){return l({type:"rule_changed",payload:e.target.value})}}),n.a.createElement("button",{type:"submit",className:"ui primary button"},"Add Rule")),function(){var e=a.errors;if(e&&e.length>0)return e.map((function(e){return n.a.createElement(w,{key:e.title,error:e,styleType:"negative"})}))}(),function(){var e=a.isLoading,t=a.rules,r={title:"No rules present",details:["There are currently no rules on this stream. Start by adding the rule \n        below.","from:twitterdev has:links","This example rule will match Tweets posted by \n     TwtterDev containing links"],type:"/content/developer-twitter/en/docs/labs/filtered-stream/operators"};return e?n.a.createElement(j,null):t&&t.length>0?t.map((function(e){return n.a.createElement(W,{key:e.id,data:e,onRuleDelete:function(e){return o(e)}})})):n.a.createElement(w,{key:r.title,error:r,styleType:"warning"})}()))},C=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"ui container"},n.a.createElement("div",{className:"introduction"}),n.a.createElement("h1",{className:"ui header"},n.a.createElement("div",{className:"content"},"HashTrack",n.a.createElement("div",{className:"sub header"},"Your Hashtag Tracker!"))),n.a.createElement("div",{className:"ui container"},n.a.createElement(d.a,null,n.a.createElement(m,null),n.a.createElement(p.a,{exact:!0,path:"/",component:S}),n.a.createElement(p.a,{exact:!0,path:"/rules",component:S}),n.a.createElement(p.a,{exact:!0,path:"/tweets",component:O}))))}}]),a}(n.a.Component);c.a.render(n.a.createElement(C,null),document.querySelector("#root"))},76:function(e,t,a){e.exports=a(132)}},[[76,1,2]]]);
//# sourceMappingURL=main.a74a5fe1.chunk.js.map